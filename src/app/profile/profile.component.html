<div class="profile-container">
  
  <div *ngIf="isLoading" class="loading-box">
    ƒêang t·∫£i th√¥ng tin...
  </div>

  <div *ngIf="!isLoading && !profileData" class="error-box">
    <h3>Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng "{{ targetUsername }}"</h3>
    <button routerLink="/home" class="btn-back">Quay v·ªÅ trang ch·ªß</button>
  </div>

  <div *ngIf="!isLoading && profileData" class="profile-content">
    
    <div class="profile-header">
      <div class="avatar-section">
        <img [src]="profileData.avatarUrl || 'assets/default-avatar.png'" alt="Avatar" class="profile-avatar">
      </div>
      
      <div class="info-section">
        <div class="name-row">
          <h2 class="username">{{ profileData.username }}</h2>
          
          <div class="actions">
            <ng-container *ngIf="isMyProfile; else otherProfileActions">
              <button class="btn btn-secondary" (click)="editProfile()">‚úèÔ∏è Ch·ªânh s·ª≠a trang c√° nh√¢n</button>
            </ng-container>
            
            <ng-template #otherProfileActions>
              <button *ngIf="!isFollowing" class="btn btn-primary" (click)="toggleFollow()">Follow</button>
              <button *ngIf="isFollowing" class="btn btn-outline" (click)="toggleFollow()">ƒêang Follow</button>
              <button class="btn btn-secondary">Nh·∫Øn tin</button>
            </ng-template>
          </div>
        </div>

        <div class="stats-row">
            <span><strong>{{ userPosts.length }}</strong> b√†i vi·∫øt</span>
            <span><strong>0</strong> ng∆∞·ªùi theo d√µi</span>
            <span><strong>0</strong> ƒëang theo d√µi</span>
        </div>

        <div class="bio-row">
          <p>{{ profileData.bio || 'Ch∆∞a c√≥ gi·ªõi thi·ªáu.' }}</p>
        </div>
      </div>
    </div>

    <hr class="divider">

    <div class="posts-grid">
      <div *ngIf="userPosts.length === 0" class="no-posts">
        <div class="icon">üì∑</div>
        <p>Ch∆∞a c√≥ b√†i vi·∫øt n√†o.</p>
      </div>

      <div *ngFor="let post of userPosts" class="post-item">
        <div class="post-card-simple">
            <div class="post-meta">{{ post.createdAt | date:'shortDate' }}</div>
            <div class="post-text">{{ post.content }}</div>
            <div class="post-footer">‚ù§Ô∏è {{ post.likeCount }} ‚Ä¢ üí¨ {{ post.commentCount }}</div>
        </div>
      </div>
    </div>

  </div>
</div>